<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Iya · wishlist 2026</title>

<style>
:root{
--bg:#f9f6f7;
--card:rgba(255,255,255,.82);
--stroke:rgba(0,0,0,.055);
--text:#26171c;
--muted:#7c5b65;
--accent:#a61c45;
}

*{box-sizing:border-box}

body{
margin:0;
font-family:-apple-system,blinkmacsystemfont,"inter","poppins",sans-serif;
background:
radial-gradient(1100px 500px at 8% -12%,#f3d1da,transparent),
radial-gradient(900px 600px at 112% 18%,#efc3d0,transparent),
var(--bg);
color:var(--text);
overflow-x:hidden;
}

/* grain */
body::after{
content:"";
position:fixed;
inset:0;
background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.03'/%3E%3C/svg%3E");
pointer-events:none;
z-index:20;
}

/* vignette */
.vignette{
position:fixed;
inset:-25%;
background:radial-gradient(circle at center,transparent 45%,rgba(0,0,0,.22));
pointer-events:none;
z-index:1;
}

/* cursor glow */
.cursor-glow{
position:fixed;
width:360px;
height:360px;
border-radius:50%;
background:radial-gradient(circle,
rgba(166,28,69,.28),
rgba(166,28,69,.12),
transparent 72%);
pointer-events:none;
transform:translate(-50%,-50%);
filter:blur(6px);
z-index:0;
}

/* ================= POLAROIDS ================= */
.polaroids{
position:fixed;
inset:0;
pointer-events:none;
z-index:2;
}

.polaroid{
position:absolute;
width:190px;
background:#fff;
padding:10px 10px 30px;
border-radius:6px;
box-shadow:0 30px 70px rgba(0,0,0,.35);
will-change:transform;
}

.polaroid img{
width:100%;
height:230px;
object-fit:cover;
border-radius:3px;
display:block;
}

/* synced positions */
.polaroid.one{
top:18%;
left:32px;
transform:rotate(-28deg);
}

.polaroid.five{
top:58%;
left:120px;
transform:rotate(-40deg);
}

.polaroid.two{
top:34%;
right:46px;
transform:rotate(32deg);
}

.polaroid.four{
top:10%;
right:150px;
transform:rotate(16deg);
}

.polaroid.three{
bottom:10%;
right:130px;
transform:rotate(-24deg);
}

@media(max-width:900px){
.polaroids{display:none}
}

/* hearts */
.heart{
position:fixed;
top:-50px;
opacity:.1;
font-size:13px;
animation:fall linear infinite;
pointer-events:none;
z-index:0;
}
@keyframes fall{to{transform:translateY(130vh)}}

/* cupid */
#cupid-wrap{
position:fixed;
top:42px;
left:-280px;
width:165px;
pointer-events:none;
z-index:3;
opacity:0;
transition:opacity 1.2s ease;
animation:cupid-move 18s linear infinite;
}

/* show after first click */
#cupid-wrap.show{
opacity:.9;
}

/* image: direction only */
#cupid{
width:100%;
display:block;
transform:scaleX(1);
animation:cupid-flip 18s steps(1) infinite;
}

/* move left → right → left */
@keyframes cupid-move{
0%{ left:-280px }
50%{ left:100vw }
100%{ left:-280px }
}

/* flip only at ends */
@keyframes cupid-flip{
0%{ transform:scaleX(1) }      /* going right */
49.9%{ transform:scaleX(1) }
50%{ transform:scaleX(-1) }   /* flip at right edge */
99.9%{ transform:scaleX(-1) }
100%{ transform:scaleX(1) }   /* flip back at left edge */
}

.book-scene{
perspective:2800px;
padding:160px 0;
position:relative;
z-index:4;
}
.book-3d{
transform-style:preserve-3d;
transform-origin:left center;
transform:rotateY(-98deg) scale(.975);
transition:transform 2.2s cubic-bezier(.15,.95,.22,1);
}
.book-3d.open{
transform:rotateY(0deg) scale(1);
}

/* card */
.wishlist-container{
width:min(900px,92%);
margin:auto;
padding:60px 54px 50px;
background:var(--card);
backdrop-filter:blur(30px);
border-radius:38px;
border:1px solid var(--stroke);
box-shadow:0 70px 180px rgba(0,0,0,.2);
}

/* header */
.header{text-align:center;margin-bottom:50px}
.header h1{
margin:0;
font-size:44px;
font-weight:600;
letter-spacing:.7px;
color:var(--accent);
}
.header p{
margin-top:14px;
font-size:12px;
letter-spacing:.45em;
text-transform:uppercase;
color:var(--muted);
}

/* wishlist items */
.item{
display:grid;
grid-template-columns:1fr 180px;
gap:30px;
padding:30px;
margin-bottom:34px;
border-radius:32px;
background:rgba(255,255,255,.7);
border:1px solid var(--stroke);
box-shadow:0 26px 70px rgba(0,0,0,.09);
transition:.35s ease;
}
.item:hover{
transform:translateY(-3px);
box-shadow:0 46px 110px rgba(166,28,69,.22);
}

/* inputs */
.details strong{
font-size:11px;
letter-spacing:.24em;
text-transform:uppercase;
color:var(--muted);
margin-bottom:14px;
display:block;
}
.details input{
width:100%;
padding:16px 18px;
margin-bottom:14px;
border-radius:18px;
border:1px solid var(--stroke);
outline:none;
font-size:14px;
}

/* image upload */
.image-area{
display:flex;
flex-direction:column;
align-items:center;
gap:12px;
}
.image-box{
width:155px;
height:155px;
border-radius:24px;
border:1.6px dashed rgba(166,28,69,.32);
display:flex;
align-items:center;
justify-content:center;
font-size:12px;
cursor:pointer;
background:#fff;
overflow:hidden;
}
.image-box:hover{border-color:var(--accent)}
.image-box img{width:100%;height:100%;object-fit:contain}

.file-input{display:none}
.remove-photo{
background:none;
border:none;
font-size:11px;
letter-spacing:.22em;
text-transform:uppercase;
color:var(--muted);
cursor:pointer;
}

/* divider */
.divider{
height:1px;
background:linear-gradient(90deg,transparent,var(--accent),transparent);
opacity:.32;
margin:34px 0;
}

/* footer */
.footer{
text-align:center;
font-size:12px;
letter-spacing:.35em;
text-transform:uppercase;
color:var(--muted);
}

/* intro */
.intro{
position:fixed;
inset:0;
background:var(--bg);
display:flex;
align-items:center;
justify-content:center;
z-index:100;
transition:opacity 1.4s ease,visibility 1.4s ease;
}
.intro.hide{opacity:0;visibility:hidden}
.intro span{
font-size:12px;
letter-spacing:.55em;
text-transform:uppercase;
color:var(--muted);
}
</style>
</head>

<body>

<div class="intro" id="intro"><span>tap anywhere</span></div>
<div class="cursor-glow" id="glow"></div>
<div class="vignette"></div>

<div class="polaroids">
<div class="polaroid one"><img src="photo1.jpg"></div>
<div class="polaroid five"><img src="photo5.jpg"></div>
<div class="polaroid two"><img src="photo2.jpg"></div>
<div class="polaroid four"><img src="photo4.jpg"></div>
<div class="polaroid three"><img src="photo3.jpg"></div>
</div>

<!-- MUSIC -->
<audio id="bgmusic" loop>
<source src="romantic-music.mp3" type="audio/mpeg">
</audio>

<!-- CUPID -->
<div id="cupid-wrap">
  <img id="cupid" src="cupid.png" alt="cupid">
</div>

<div class="book-scene">
<div class="book-3d">
<div class="wishlist-container">

<div class="header">
<h1>Iya's</h1>
<p>valentine wishlist 2026</p>
</div>

<div id="items-wrapper">
<script>
for(let j=1;j<=10;j++){
document.write(`
<div class="item">
<div class="details">
<strong>gift ${j}</strong>
<input class="name-input" placeholder="gift name">
<input class="link-input" type="url" placeholder="optional link">
</div>
<div class="image-area">
<div class="image-box">upload image</div>
<input class="file-input" type="file" accept="image/*">
<button class="remove-photo">remove</button>
</div>
</div>
<div class="divider"></div>
`);
}
</script>
</div>

<div class="footer">with love</div>

</div>
</div>
</div>

<!-- firebase -->
<script>
var firebase_config={
apiKey:"AIzaSyDkW--iV30bddiY18tq_L0R5l0ysWqu_tA",
authDomain:"iya-christmas-wish.firebaseapp.com",
projectId:"iya-christmas-wish",
storageBucket:"iya-christmas-wish.firebasestorage.app",
messagingSenderId:"94208728014",
appId:"1:94208728014:web:7573849854d73a134ea99f",
measurementId:"G-Z7Z6ZRB9PH"
};

firebase.initializeApp(firebase_config);

var db=firebase.firestore();
var storage=firebase.storage();
var wishlist_doc=db.collection("wishlists").doc("iyas-2026");

var is_local_edit=false;
var is_applying=false;
var is_initialized=false;
var save_timer=null;

/* image helpers */
function set_image_on_box(box,src){
box.innerHTML="";
var img=document.createElement("img");
img.src=src;
box.appendChild(img);
}

function file_to_small_data_url(file,cb){
var r=new FileReader();
r.onload=function(e){
var img=new Image();
img.onload=function(){
var m=512,w=img.width,h=img.height;
if(w>h&&w>m){h=h*(m/w);w=m}
else if(h>m){w=w*(m/h);h=m}
var c=document.createElement("canvas");
c.width=w;
c.height=h;
c.getContext("2d").drawImage(img,0,0,w,h);
cb(c.toDataURL("image/jpeg",0.7));
};
img.src=e.target.result;
};
r.readAsDataURL(file);
}

/* SAVE DATA (LOCKED) */
function save_data(){
if(!is_initialized)return;
if(is_applying)return;
if(save_timer)clearTimeout(save_timer);

save_timer=setTimeout(function(){
is_local_edit=true;

var items=[];
document.querySelectorAll(".item").forEach(function(item){
var img=item.querySelector(".image-box img");
items.push({
name:item.querySelector(".name-input").value||"",
link:item.querySelector(".link-input").value||"",
image:img?img.src:""
});
});

wishlist_doc.set({items:items}).then(function(){
setTimeout(function(){is_local_edit=false},300);
});
},400);
}

/* APPLY DATA */
function apply_data(items){
if(!items)return;

is_applying=true;

document.querySelectorAll(".item").forEach(function(item,i){
var d=items[i];
if(!d)return;

item.querySelector(".name-input").value=d.name||"";
item.querySelector(".link-input").value=d.link||"";

if(d.image){
set_image_on_box(item.querySelector(".image-box"),d.image);
}else{
item.querySelector(".image-box").innerHTML="upload image";
}
});

is_applying=false;
}

/* SETUP UI */
function setup(){
document.querySelectorAll(".item").forEach(function(item){
var box=item.querySelector(".image-box");
var input=item.querySelector(".file-input");
var remove=item.querySelector(".remove-photo");

box.onclick=function(){input.click()};

input.onchange=function(e){
var f=e.target.files[0];
if(!f)return;

file_to_small_data_url(f,function(preview){
set_image_on_box(box,preview);

var ref=storage.ref("wishlist_images/"+Date.now()+"_"+f.name);
ref.putString(preview,"data_url")
.then(function(){return ref.getDownloadURL()})
.then(function(url){
set_image_on_box(box,url);
save_data();
});
});
};

remove.onclick=function(){
box.innerHTML="upload image";
input.value="";
save_data();
};

item.querySelectorAll("input").forEach(function(inp){
inp.addEventListener("input",save_data);
});
});
}

/* SNAPSHOT (ONLY ONCE INIT) */
wishlist_doc.onSnapshot(function(doc){
if(!doc.exists)return;

apply_data(doc.data().items||[]);

if(!is_initialized){
is_initialized=true;
}
});

document.addEventListener("DOMContentLoaded",setup);

/* first click */
document.addEventListener("click",function(){
document.getElementById("intro").classList.add("hide");

var m=document.getElementById("bgmusic");
m.volume=0;
m.play();
var v=0;
var f=setInterval(function(){
v+=.02;
m.volume=Math.min(v,.45);
if(v>=.45)clearInterval(f);
},70);

document.querySelector(".book-3d").classList.add("open");
setTimeout(function(){
document.getElementById("cupid-wrap").classList.add("show");
},1000);
},{once:true});

/* cursor follow */
var glow=document.getElementById("glow");
document.addEventListener("mousemove",function(e){
glow.style.left=e.clientX+"px";
glow.style.top=e.clientY+"px";
});

/* polaroid parallax */
var p1=document.querySelector(".polaroid.one");
var p5=document.querySelector(".polaroid.five");
var p2=document.querySelector(".polaroid.two");
var p4=document.querySelector(".polaroid.four");
var p3=document.querySelector(".polaroid.three");

window.addEventListener("scroll",function(){
var y=window.scrollY;
p1.style.transform="translateY("+(y*0.08)+"px) rotate(-30deg)";
p5.style.transform="translateY("+(y*0.11)+"px) rotate(-42deg)";
p2.style.transform="translateY("+(y*0.12)+"px) rotate(34deg)";
p4.style.transform="translateY("+(y*0.07)+"px) rotate(18deg)";
p3.style.transform="translateY("+(y*0.06)+"px) rotate(-25deg)";
});
</script>

</body>
</html>